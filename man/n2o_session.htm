<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <meta name="author" content="Maxim Sokhatsky" />
    <title>SESSION</title>
    <link rel="stylesheet" href="https://synrc.space/synrc.css" />
</head>
<body>
<nav>
    <a href='https://synrc.space/'>SYNRC</a>
    <a href='https://n2o.space'>N2O ECO</a>
    <a href='../index.html'>N2O</a>
</nav>
<header>
    <a href="../index.html"><img src="https://n2o.space/img/Synrc Neo.svg"></a>
    <h1>SESSION</h1>
</header>
<main>
    <section>
        <h3>INTRO</h3>
        <p>The <a href="https://github.com/synrc/mqtt/blob/master/src/services/n2o_session.erl">n2o_session</a>
        module provides session variables protected by authorization token.</p>
        <figure><code>
 > ets:tab2list(cookies).
 [{{<<"05dcf467c79071008bc4">>,user},{63710034516,"maxim"}},
  {{<<"05dcf467c79071008bc4">>,room},{63710034516,"n2o"}},
  {{<<"05dcf467c79071008bc4">>,auth},{63710033891,[]}}]
        </code></figure>
    </section>
    <section>
        <h3>TYPES</h3>
        <p>Session token represents tuple cached in ETS.
           It consists of session id, key, expiration time and value.
           Session token used both for auth and for session variales.</p>
        <figure><code>
 -type session() :: { { binary(), term() } , { integer(), term() } }.
        </code></figure>
        <p>Session token encoded with pickler tagged as <b>'Token'</b> tuple.</p>
        <figure><code>
 -type token() :: { 'Token', binary() }.
        </code></figure>
    </section>
    <section>
        <h3>API</h3>
        <h4>authenticate([],binary()) -> #'Token'{}.</h4>
        <p>If token is unknown a new token is being issued.
           If token is valid and not expired and not nitro_prolongate is false the token remains unchanged.
           If token is valid but expired or nitro_prolongate is true the token renewed with same session id.</p>
        <h4>get_value(binary(),term(),term()) -> term().</h4>
        <p>Gets session variable.</p>
        <h4>set_value(binary(),term(),term()) -> term().</h4>
        <p>Sets session variable.</p>
        <h4>clear(binary()) -> ok.</h4>
        <p>Clear all session variables along with authentication.</p>
        <h4>invalidate_sessions() -> ok.</h4>
        <p>Removes all expired session tokens.</p>
    </section>
    <section>
        <p>You may also want to read:
        <b><a href="n2o_nitro.htm">n2o_nitro</a></b>,
        <b><a href="n2o.htm">n2o</a></b>.
        </p>
    </section>
</main>
<footer>
    2005&mdash;2018 &copy; Synrc Research Center
</footer>
</body>
</html>
